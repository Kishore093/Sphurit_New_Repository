{% extends 'user-face/base.html' %}
{% load static %}
{% block extrastyle %}

<link rel="stylesheet" href="{% static 'css/form_style.css' %}">
{% endblock extrastyle %}
{% block script %}
<script src="{% static 'js/viewform.js' %}" defer></script>
{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8 py-3" style="background-color: #F0F7FF;">
        <div class="container" style="background-color: white">
            <form class="py-2" method="POST" action="{% url 'submit_form' form.code %}" autocomplete="off" enctype="multipart/form-data" id="submit_form">
                {% csrf_token %}
                <div class="margin-top-bottom">
                    <div class="form-title-box">
                        <h1 class="form-title txtClr">{{form.title}}</h1>
                    </div>
                    <div class="form-description txtClr">{{form.description|linebreaksbr}}</div>
                </div>
                {% if form.collect_email %}
                <div class="margin-top-bottom box question-box">
                    <h1 class="question-title txtClr">Email address: <span class="require-star">*</span></h1>
                    <input type="email" name="email-address" class="short-answer" placeholder="Your email address" required>
                </div>
                {% endif %}
                {% for question in form.questions.all %}
                <div class="margin-top-bottom">
                    <h1 class="question-title txtClr">{{question.question}} {% if question.required %}<span class="require-star">*</span>{% endif %}</h1>
                    {% if question.question_type == "short" %}
                        <input type="text" name="{{question.id}}" maxlength="100" class="short-answer" placeholder = "Your answer" {% if question.required %} required {% endif %}>
                        <br><small style="color: red;">Max. 100 charactors only</small>
                    {% elif question.question_type == "paragraph" %}
                        <textarea name="{{question.id}}" maxlength="5000" placeholder="Your answer" class="long-answer textarea-adjust" {% if question.required %} required {% endif %}></textarea>
                        <small style="color: red;">Max. 5000 charactors only</small>
                    {% elif question.question_type == "multiple choice" %}
                        {% for choice in question.choices.all %}
                        <div class="multiple-choice">
                            <input type="radio" name="{{question.id}}" id="{{choice.id}}" {% if question.required %} required {% endif %} value="{{choice.id}}">
                            <label for="{{choice.id}}" class="txtClr">{{choice.choice}}</label>
                        </div>
                        {% endfor %}
                    {% elif question.question_type == "checkbox" %}
                        {% for choice in question.choices.all %}
                            <div class="multiple-choice">
                                <input type="checkbox" name="{{question.id}}" id="{{choice.id}}" {% if question.required %} required {% endif %} value="{{choice.id}}">
                                <label for="{{choice.id}}" class="txtClr">{{choice.choice}}</label>
                            </div>
                        {% endfor %}
                    {% elif question.question_type == "dropdown" %}
                        <select class="question-type-select input-question-type" name="{{question.id}}" {% if question.required %} required {% endif %} data-id="{{question.id}}" data-origin_type = "{{question.question_type}}">
                            <option disabled selected>Choose</option>
                            {% for choice in question.choices.all %}
                            <option value="{{choice.id}}" >{{choice.choice}}</option>
                            {% endfor %}
                        </select>
                    {% elif question.question_type == "date" %}
                        <input type="date" name="{{question.id}}" class="short-answer" placeholder = "Your answer" {% if question.required %} required {% endif %}>
                    {% elif question.question_type == "time" %}
                        <input type="time" name="{{question.id}}" class="short-answer" placeholder = "Your answer" {% if question.required %} required {% endif %}>
                    {% elif question.question_type == "fileupload" %}
                        <input type ="file" name="{{question.id}}" class="short-answer" {% if question.required %} required {% endif %} multiple placeholder="file" />
                    {% endif %}
                    
                </div>
                <hr>
                {% endfor %}
                <div class="margin-top-bottom">
                    <input type="submit" value="Submit" class="btn btn-submit">
                </div>
            </form>
            {% if user == form.creator %}
                <a href="{% url 'edit_form' form.code %}">
                    <img src="{% static 'Icon/question.png' %}" alt="Edit Question" title="Edit this form" class="edit-form-link">
                </a>
            {% endif %}
        </div>
    </div>
</div>


{% endblock %}