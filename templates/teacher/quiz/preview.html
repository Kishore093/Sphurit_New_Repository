{% extends 'teacher/base.html' %}
{% load static %}

{% block extrastyle %}
<link rel="stylesheet" href="{% static 'css/form_style.css' %}">
{% endblock extrastyle %}
{% block script %}
<script src="{% static 'js/viewform.js' %}" defer></script>
{% endblock %}
{% block content %}
<style>
    .card {
    /* margin-bottom: 30px; */
    margin: 0 0px 30px;
    border: none;
    border-radius: 12px !important;
    box-shadow: 0 0 1px 1px #00000017;
}
</style>
<main id="main" class="main">
    <div class="row justify-content-start">
        <div class="col-lg-12 col-md-12 ">
            <h5 class="card-title">{% if form.is_quiz %}Quiz{% else %}Assigment{% endif %} For Topic &emsp;->&emsp; {{form.topic.topic_name}}</h5>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card mb-3" >
                <div class="card-body p-0">
                    <div class="px-3 py-0 pt-3 mb-1">
                        <div class="pagetitle mb-0">
                            <h1>{{form.title}}</h1>
                        </div>
                        <span class="card-text">{{form.description|linebreaksbr}}</span>
                        <hr>
                        
                        {% for question in form.questions.all %}
                        <div class="question mb-3" data-id="{{question.id}}">
                            <!-- <span class="card-title">Q.{{forloop.counter}}&emsp13; {{question.question}} <span>|{{question.question_type}}</span> </span> -->
                            <div class="d-flex justify-content-between">
                                <span class="card-title p-0 my-auto">Q.{{forloop.counter}}&emsp13; {{question.question}}</span>
                                <div class="checkbox-container my-auto">  
                                    <input type="checkbox" id="required-{{question.id}}" data-id="{{question.id}}" {% if question.required %}checked="checked"{% endif %}  disabled="disabled"/>
                                    <label for="required-{{question.id}}">Required</label>    
                                </div>
                            </div>
                            {% if question.question_type == "multiple choice" %}
                            
                            <div class=" d-flex" data-id="{{question.id}}">
                                {% for choice in question.choices.all %}
                                    <div class="choice">
                                        <input type="radio" id="{{choice.id}}" disabled>&emsp13;
                                        <span>{{choice.choice}}</span>
                                    </div>&emsp;&emsp;
                                {% endfor %}
                            </div>
                            {% elif question.question_type == "checkbox" %}
                            <div class=" d-flex" data-id="{{question.id}}">
                                {% for choice in question.choices.all %}
                                    <div class="choice d-flex">
                                        <input type="checkbox" id="{{choice.id}}" disabled>&emsp13;
                                        <span>{{choice.choice}}</span> 
                                    </div>&emsp;&emsp;
                                {% endfor %}
                            </div>
                            {% elif question.question_type == "dropdown" %}
                            <div class=" d-flex" data-id="{{question.id}}">
                                {% for choice in question.choices.all %}
                                    <div class="choice">
                                        <input type="radio" id="{{choice.id}}" disabled>&emsp13;
                                        <span>{{choice.choice}}</span>
                                    </div>&emsp;&emsp;
                                {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                        <!-- <hr class="m-0">
                        <div class="d-flex justify-content-between" id="">
                            <div class="pt-2">
                                <p class="fw-bold">View All Response and Edit Assigment</p>
                            </div>
                            <div class="d-flex">
                                <a href="{% url 'quiz_responses' form.code %}" class="btn btn-outline-secondary btn-sm my-auto mx-2" title="View Response"><i class="bi bi-people"></i></a>
                                <a href="{% url 'edit_form' form.code %}" class="btn btn-outline-secondary btn-sm my-auto" title="Edit Assigment"><i class="bi bi-pencil"></i></a>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <div class="container-fluid">
        <form class="container" method="POST" action="{% url 'submit_form' form.code %}" autocomplete="off" enctype="multipart/form-data">
            <span id="bg-color" style="display: none;">{{form.background_color}}</span>
            <span id="text-color" style="display: none;">{{form.text_color}}</span>
            {% csrf_token %}
            <div class="margin-top-bottom box question-box">
                <div class="form-title-box">
                    <h1 class="form-title txtClr">{{form.title}}</h1>
                    <p class="required-info">* Required</p>
                </div>
                <div class="form-description txtClr">{{form.description|linebreaksbr}}</div>
            </div>
            {% if form.collect_email %}
            <div class="margin-top-bottom box question-box">
                <h1 class="question-title txtClr">Email address: <span class="require-star">*</span></h1>
                <input type="email" name="email-address" class="short-answer" placeholder="Your email address" required>
            </div>
            {% endif %}
            {% for question in form.questions.all %}
            <div class="margin-top-bottom box question-box">
                <h1 class="question-title txtClr">{{question.question}} {% if question.required %}<span class="require-star">*</span>{% endif %}</h1>
                {% if question.question_type == "short" %}
                    <input type="text" name="{{question.id}}" maxlength="100" class="short-answer" placeholder = "Your answer" {% if question.required %} required {% endif %}>
                    <br><small style="color: red;">Max. 100 charactors only</small>
                {% elif question.question_type == "paragraph" %}
                    <textarea name="{{question.id}}" maxlength="5000" placeholder="Your answer" class="long-answer textarea-adjust" {% if question.required %} required {% endif %}></textarea>
                    <small style="color: red;">Max. 5000 charactors only</small>
                {% elif question.question_type == "multiple choice" %}
                    {% for choice in question.choices.all %}
                    <div class="multiple-choice">
                        <input type="radio" name="{{question.id}}" id="{{choice.id}}" {% if question.required %} required {% endif %} value="{{choice.id}}">
                        <label for="{{choice.id}}" class="txtClr">{{choice.choice}}</label>
                    </div>
                    {% endfor %}
                {% elif question.question_type == "checkbox" %}
                    {% for choice in question.choices.all %}
                        <div class="multiple-choice">
                            <input type="checkbox" name="{{question.id}}" id="{{choice.id}}" {% if question.required %} required {% endif %} value="{{choice.id}}">
                            <label for="{{choice.id}}" class="txtClr">{{choice.choice}}</label>
                        </div>
                    {% endfor %}
                {% elif question.question_type == "dropdown" %}
                    <select class="question-type-select input-question-type" name="{{question.id}}" {% if question.required %} required {% endif %} data-id="{{question.id}}" data-origin_type = "{{question.question_type}}">
                        <option disabled selected>Choose</option>
                        {% for choice in question.choices.all %}
                        <option value="{{choice.id}}" >{{choice.choice}}</option>
                        {% endfor %}
                    </select>
                {% elif question.question_type == "date" %}
                    <input type="date" name="{{question.id}}" class="short-answer" placeholder = "Your answer" {% if question.required %} required {% endif %}>
                {% elif question.question_type == "time" %}
                    <input type="time" name="{{question.id}}" class="short-answer" placeholder = "Your answer" {% if question.required %} required {% endif %}>
                {% elif question.question_type == "fileupload" %}
                    <input type ="file" name="{{question.id}}" class="short-answer" {% if question.required %} required {% endif %} multiple placeholder="file" />
                {% endif %}
                
            </div>
            {% endfor %}
            <div class="margin-top-bottom">
                <input type="submit" value="Submit" class="btn btn-submit">
            </div>
        </form>
        {% if user == form.creator %}
            <a href="{% url 'edit_form' form.code %}">
                <img src="{% static 'Icon/question.png' %}" alt="Edit Question" title="Edit this form" class="edit-form-link">
            </a>
        {% endif %}
    </div> -->
</main>
{% endblock %}
